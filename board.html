<!DOCTYPE html>
<html>
<head>
	<title>BOARD</title>
	<link rel="stylesheet" type="text/css" href="board.css">
</head>
<body>
	<div class="container">
		<div class="board"></div>
		<div class="menu">
			<div class="LEDMenu"></div>
				<button onclick="LEDBoard()">LED</button>
				<input type="text" value="#" name="colorLED" id="LEDcolor" 
				onkeydown="if (event.keyCode == 13) document.getElementById('changeLEDColor').click()">
	            <button type="button" id="changeLEDColor" onclick="changeLEDColor()">GO</button>
			</div>
			<button onclick="WaveBoard()">WaveBoard</button>
			<button onclick="randomBoard()">RandomBoard</button>
			<div class="drawMenu">
				<button onclick="drawBoard()">Draw</button>
				<button onclick="saveBoard()">Save</button>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		var colorOnClick = "pink";
		var LEDcolor = "green";
		var isDraw = false;
		var isWaving = false;
		var isBlinking = false;
		var row = 10;
		var col = 30;
		var shape = [
			//7*15
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,1,0,1,0,1,0,0,0,1,0,1,1,1,0],
			[0,1,0,1,0,1,0,1,0,1,0,1,0,0,0],
			[0,1,1,1,0,1,0,1,0,1,0,1,0,0,0],
			[0,0,1,0,0,1,0,1,0,1,0,1,0,0,0],
			[0,0,1,0,0,1,1,1,1,1,0,1,1,1,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
		];

		function createBoard() {
			var ID = "box"; 
			for (var i = 0; i < row; i++) {
				var rowDiv = document.createElement("div");
				ID += i;
				rowDiv.className = "row";
				for (var j = 0; j < col; j++) {
					var boxID = ID + j +"";
					var boxDiv = document.createElement("div");
					boxDiv.className = "box";
					boxDiv.id = boxID;
					rowDiv.appendChild(boxDiv);  
				}
				document.getElementsByClassName("board")[0].appendChild(rowDiv);
				ID = "box";
			}
		}

		//Fix it
		//
		//
		//
		function addClickListener() {
			for (var i = 0; i < row; i++) {
				for (var j = 0; j < col; j++) {
					var box = document.getElementsByClassName("row")[i].childNodes;
					box[j].addEventListener("click", 
						function (boxID) {
							document.getElementById(boxID).style.animation = "flash 1s 1 linear";
						});
				}
			}
		}

		function drawBoard() {

		}

		function saveBoard() {

		}

		function render(shape, color) {
			for (var i = 0; i < row; i++) {
				for (var j = 0; j < col; j++) {
					var pos =shape[i][j];
					var box = document.getElementsByClassName("row")[i].childNodes;
					if(pos == 1){
						box[j].style.background=color;
					}

				}
			}
		}

		function LEDBoard() {
			var rowDiv = document.getElementsByClassName("row");
			if(!isBlinking) {
				for (var i = 0; i < row; i++) {
					for (var j = 0; j < col; j++) {
						var pos =shape[i][j];
						if(pos == 1){
							rowDiv[i].childNodes[j].style.background = LEDcolor;
							rowDiv[i].childNodes[j].style.animation = "flash 1.8s infinite linear";
						}

					}
					isBlinking = true;
				}
			} else {
				isBlinking = false;
				for (var i = 0; i < row; i++) {
					for (var j = 0; j < col; j++) {
						rowDiv[i].childNodes[j].style.animation = "";
					}
				}
			}
			
		}

		function WaveBoard() {
			var rowDiv = document.getElementsByClassName("row");
			if (!isWaving){
				for (var i = 0; i < row; i++) {
				   	for (var j = 0; j < col; j++) {
						(function(i,j) {
							setTimeout(function(){
				       			rowDiv[i].style.animation = "bounce 2s infinite linear";}, (100 * i)
				       		);
				       		setTimeout(function(){
				       			rowDiv[i].childNodes[j].style.animation = "bounce 5s 2 linear";}, (500 * j)
				       		);
				   		})(i,j);
					}
				}
				isWaving = true;
			} else {
				isWaving = false;
				for (var i = 0; i < row; i++) {
				   	for (var j = 0; j < col; j++) {
						rowDiv[i].style.animation = "";
				       	rowDiv[i].childNodes[j].style.animation = "";
					}
				}
			}
		}

		function changeLEDColor(color){
			LEDcolor = document.getElementById('LEDcolor').value;
			isBlinking = false;
			LEDBoard();
		}
		createBoard();
		// addClickListener();
		render(shape, "red");

		function randomBoard() {
			var i = 0;
			while (i<=1000) {

				(function(i) {
					setTimeout(function(){
		       			var randomRow = Math.floor(Math.random() * row);
						var randomCol = Math.floor(Math.random() * col);
						var rowDiv = document.getElementsByClassName("row");
						rowDiv[randomRow].childNodes[randomCol].style.background = getRandomColor();
		       			}, (100 * i)
		       		);
				})(i);
				i++;
			}	
		}

		function getRandomColor() {
		    var letters = '0123456789ABCDEF';
		    var color = '#';
		    for (var i = 0; i < 6; i++ ) {
		        color += letters[Math.floor(Math.random() * 16)];
		    }
		    return color;
		}

	</script>
</body>
</html>