<!DOCTYPE html>
<html>
<head>
	<title>BOARD</title>
	<link rel="stylesheet" type="text/css" href="board.css">
</head>
<body>
	<div class="board"></div>
	<div class="menu">
		<div class="LEDMenu"></div>
			<button onclick="LEDBoard()">LED</button>
			<input type="text" value="#" name="colorLED" id="LEDcolor" 
			onkeydown="if (event.keyCode == 13) document.getElementById('changeLEDColor').click()">
            <button type="button" id="changeLEDColor" onclick="changeLEDColor()">GO</button>
		</div>
		<button onclick="WaveBoard()">WaveBoard</button>
		<div class="drawMenu">
			<button onclick="drawBoard()">Draw</button>
			<button onclick="saveBoard()">Save</button>
		</div>
	</div>

	<script type="text/javascript">
		var colorOnClick = "pink";
		var LEDcolor = "green";
		var isDraw = false;
		var row = 7;
		var col = 15;
		var shape = [
			//7*15
			"000000000000000",
			"010101000101110",
			"010101010101000",
			"011101010101000",
			"001001010101000",
			"001001111101110",
			"000000000000000"
		];

		function createBoard() {
			var ID = "box"; 
			for (var i = 0; i < row; i++) {
				var rowDiv = document.createElement("div");
				ID += i;
				rowDiv.className = "row";
				for (var j = 0; j < col; j++) {
					var boxID = ID + j +"";
					var boxDiv = document.createElement("div");
					boxDiv.className = "box";
					boxDiv.id = boxID;
					rowDiv.appendChild(boxDiv);  
				}
				document.getElementsByClassName("board")[0].appendChild(rowDiv);
				ID = "box";
			}
		}

		function addClickListener() {
			for (var i = 0; i < row; i++) {
				for (var j = 0; j < col; j++) {
					var box = document.getElementsByClassName("row")[i].childNodes;
					box[j].addEventListener("click", 
						function (boxID) {
							document.getElementById(boxID).style.animation = "flash 1s 1 linear";
						});
				}
			}
		}

		function drawBoard() {

		}

		function saveBoard() {

		}

		function render(shape, color) {
			for (var i = 0; i < row; i++) {
				var rowtemp = shape[i];
				for (var j = 0; j < col; j++) {
					var pos = rowtemp.charAt(j);
					var box = document.getElementsByClassName("row")[i].childNodes;
					if(pos == 1){
						box[j].style.background=color;
					}

				}
			}
		}

		function LEDBoard() {
			for (var i = 0; i < row; i++) {
				var rowtemp = shape[i];
				for (var j = 0; j < col; j++) {
					var pos = rowtemp.charAt(j);
					var box = document.getElementsByClassName("row")[i].childNodes;
					if(pos == 1){
						box[j].style.background=LEDcolor;
						box[j].style.animation = "flash 1s infinite linear";
					}

				}
			}
		}

		function WaveBoard() {
			var rowDiv = document.getElementsByClassName("row");
			for (var i = 0; i < row; i++) {
			   	for (var j = 0; j < col; j++) {
					(function(i,j) {
						setTimeout(function(){
			       			rowDiv[i].style.animation = "bounce 2s infinite linear";}, (100 * i)
			       		);
			       		setTimeout(function(){
			       			rowDiv[i].childNodes[j].style.animation = "bounce 2s 2 linear";}, (500 * j)
			       		);
			   		})(i,j);
				}
			}

			// for (var i = 0; i < row; i++) {
			// 	var rowDiv = document.getElementsByClassName("row")[i];

			// 	var wait = function(){
			// 		rowDiv.style.animation = "bounce 1s infinite linear";
			// 	}
			// 	setInterval( wait, 2000 );
			// 	for (var j = 0; j < col; j++) {
			// 		// rowDiv.childNodes[j].style.animation = "bounce 2s infinite linear";
			// 	}
			// }
		}

		function changeLEDColor(color){
			LEDcolor = document.getElementById('LEDcolor').value;
			LEDBoard();
		}
		createBoard();
		addClickListener();
		render(shape, "red");
	</script>
</body>
</html>